# EnglishFlow - KiÅŸiselleÅŸtirilmiÅŸ Ä°ngilizce GeliÅŸtirme Sistemi

## ğŸ“‹ Durum Analizi

### Mevcut Profil
- **Seviye:** B1 (Orta)
- **Anlama Kapasitesi:** ~%80
- **KonuÅŸma Kapasitesi:** Zihninden geÃ§enlerin <%50'si
- **Hedef Aksan:** British English (RP - Received Pronunciation)

### KullanÄ±m BaÄŸlamlarÄ±
1. **HavalimanÄ± & Seyahat** - Check-in, gÃ¼venlik, bagaj, yÃ¶nlendirmeler
2. **Teknik GÃ¶rÃ¼ÅŸmeler** - Semi-trailer terminolojisi, Ã¼retim sÃ¼reÃ§leri, kalite
3. **Sosyal Ortamlar** - Restoran, gÃ¼nlÃ¼k sohbet, small talk

### Tespit Edilen Engeller
| Engel | KÃ¶k Neden | Ã‡Ã¶zÃ¼m YaklaÅŸÄ±mÄ± |
|-------|-----------|-----------------|
| MÃ¼kemmeliyetÃ§ilik | Hata korkusu | Progressive Accuracy + Fluency First |
| Zaman yapÄ±larÄ± karmaÅŸasÄ± | L1 Transfer hatasÄ± | Chunking + Pattern Recognition |
| Zihinsel Ã§eviri | Dual-processing yÃ¼kÃ¼ | Direct Association + Immersion |
| Dil kÃ¶rlÃ¼ÄŸÃ¼ | Exposure eksikliÄŸi | Daily Micro-Immersion |
| Non-native anlama zorluÄŸu | Accent variation | Multi-accent exposure |
| Kelime daÄŸarcÄ±ÄŸÄ± | Domain-specific gaps | Contextual Vocabulary Building |

---

## ğŸ§  Metodoloji Ã‡erÃ§evesi

### 1. Comprehensible Input (Krashen's i+1)
**Prensip:** Mevcut seviyenin biraz Ã¼stÃ¼nde (i+1) materyal ile doÄŸal edinim.

**Uygulama:**
- British podcast/video iÃ§erikleri (BBC Learning English, British Council)
- Teknik dokÃ¼manlar (semi-trailer manuals, industry publications)
- Graded readers (B1-B2 seviyesi)

### 2. Shadowing Technique (Kaizen Dil Ã–ÄŸrenimi)
**Prensip:** Native konuÅŸmacÄ±yÄ± anlÄ±k olarak taklit etme.

**AÅŸamalar:**
1. **Passive Listening** - 2-3 kez dinle, anlam kavra
2. **Active Listening** - Transcript ile takip et
3. **Mumbling** - Sessizce dudak hareketleriyle takip
4. **Shadowing** - AynÄ± anda sesli tekrar
5. **Independent** - BaÄŸÄ±msÄ±z Ã¼retim

**British Accent iÃ§in Odak NoktalarÄ±:**
- Non-rhotic 'r' (car â†’ /kÉ‘Ë/)
- Long 'a' (bath â†’ /bÉ‘ËÎ¸/)
- T-glottalization (butter â†’ /ËˆbÊŒÊ”É™/)
- Linking sounds

### 3. Chunking & Collocations
**Prensip:** Kelime yerine hazÄ±r kalÄ±p Ã¶ÄŸrenme.

**Ã–rnek Chunks (Teknik BaÄŸlam):**
```
"I'd like to walk you through..."
"As you can see from the specifications..."
"The lead time for this would be..."
"Let me get back to you on that."
"We're looking at approximately..."
```

**Ã–rnek Chunks (Sosyal BaÄŸlam):**
```
"Shall we say around 7?"
"I was wondering if you'd like to..."
"That sounds lovely."
"I'm afraid I'll have to..."
"Would you mind if...?"
```

### 4. Spaced Repetition System (SRS)
**Prensip:** Leitner Box / SM-2 algoritmasÄ± ile optimal tekrar zamanlamasÄ±.

**AralÄ±klar:**
- Ä°lk tekrar: 1 gÃ¼n
- Ä°kinci: 3 gÃ¼n
- ÃœÃ§Ã¼ncÃ¼: 7 gÃ¼n
- DÃ¶rdÃ¼ncÃ¼: 14 gÃ¼n
- BeÅŸinci: 30 gÃ¼n
- (BaÅŸarÄ±sÄ±zlÄ±kta baÅŸa dÃ¶n)

### 5. Fluency First Approach (Anti-Perfectionism)
**Prensip:** AkÄ±cÄ±lÄ±k > DoÄŸruluk (baÅŸlangÄ±Ã§ta)

**Uygulama:**
- ZamanlÄ± konuÅŸma egzersizleri (60 saniyede anlat)
- "Good enough" feedback sistemi
- Error tolerance scoring (%70 doÄŸruluk = baÅŸarÄ±lÄ±)
- Progressive accuracy (akÄ±cÄ±lÄ±k kazanÄ±ldÄ±kÃ§a doÄŸruluk artar)

### 6. Direct Association Method
**Prensip:** TÃ¼rkÃ§e Ã§eviri yerine gÃ¶rsel/baÄŸlamsal iliÅŸkilendirme.

**Uygulama:**
- GÃ¶rsel flashcard'lar (kelime + gÃ¶rsel, TÃ¼rkÃ§e yok)
- Situation-based learning (baÄŸlam iÃ§inde Ã¶ÄŸrenme)
- English-to-English definitions

### 7. Tense Mastery Through Stories
**Prensip:** Ä°zole gramer yerine baÄŸlam iÃ§inde zaman Ã¶ÄŸrenme.

**TÃ¼rkÃ§e-Ä°ngilizce Zaman EÅŸleÅŸtirmesi:**
| TÃ¼rkÃ§e | Ä°ngilizce | Ã–rnek |
|--------|-----------|-------|
| -DI (Belirli GeÃ§miÅŸ) | Past Simple | I sent the quotation yesterday. |
| -MIÅ (Belirsiz/Duyum) | Present Perfect / Reported | I've heard they received it. / They said they had received it. |
| -IYOR (Åimdiki) | Present Continuous | I'm preparing the documents. |
| -IR/-AR (GeniÅŸ) | Present Simple | We manufacture semi-trailers. |
| -ECEK (Gelecek) | Will / Going to | We'll ship next week. |
| -IYORDU (SÃ¼regelen GeÃ§miÅŸ) | Past Continuous | We were discussing when you called. |

---

## ğŸ—ï¸ Uygulama Mimarisi

### ModÃ¼ller

#### 1. ğŸ§ Immersion Hub
- British English podcast/video entegrasyonu
- Daily listening challenge (15-30 dk)
- Comprehension quizzes
- Subtitle toggle (Ã¶nce aÃ§Ä±k, sonra kapalÄ±)

#### 2. ğŸ—£ï¸ Shadowing Studio
- Native audio + waveform visualization
- Recording & comparison
- Pronunciation scoring (Web Speech API)
- British accent specific drills

#### 3. ğŸ“¦ Chunk Library
- Domain-based categories (Technical, Travel, Social)
- Audio pronunciation (British)
- Usage examples in context
- SRS review system

#### 4. â° Tense Trainer
- Interactive timeline visualization
- Story-based exercises
- Turkish-English mapping guide
- Common error correction

#### 5. ğŸ’¬ Conversation Simulator
- AI-powered role-play scenarios
- Airport, Technical meeting, Dinner scenarios
- Real-time speech recognition
- Fluency-focused feedback

#### 6. ğŸ“Š Progress Dashboard
- Daily streak tracker
- Vocabulary growth chart
- Weak areas identification
- Weekly review suggestions

#### 7. ğŸ”” Daily Micro-Immersion
- Push notifications with daily phrase
- "Word of the day" with audio
- Quick 2-minute exercises
- Anti-atrophy reminders

---

## ğŸ¨ UI/UX TasarÄ±m Prensipleri

### GÃ¶rsel Dil
- **Tema:** Premium, minimal, Apple-inspired (Lewis'in tercihi)
- **Renk Paleti:** 
  - Primary: Deep Navy (#1a365d)
  - Accent: British Racing Green (#004225)
  - Background: Warm White (#fafaf9)
  - Success: Emerald (#059669)
- **Tipografi:** 
  - Display: Playfair Display (British elegance)
  - Body: Source Sans Pro (readability)
- **Animasyonlar:** Subtle, purposeful micro-interactions

### Gamification (Hafif)
- Daily streaks (kÄ±rÄ±lÄ±nca motivasyon kaybÄ± Ã¶nleme)
- Achievement badges (teknik terminoloji master, vb.)
- Progress visualization (not leaderboards - personal growth focus)

---

## ğŸ”§ Teknik Stack

### Frontend
```
- React 18 + TypeScript
- TailwindCSS (custom theme)
- Framer Motion (animations)
- React Query (data fetching)
- Zustand (state management)
```

### Audio & Speech
```
- Web Speech API (recognition + synthesis)
- Tone.js (audio processing)
- WaveSurfer.js (waveform visualization)
- British English TTS voices
```

### Data & Storage
```
- IndexedDB (offline-first)
- LocalStorage (preferences)
- Optional: Supabase/Firebase (sync)
```

### Content
```
- Custom JSON content files
- Markdown for lessons
- Audio files (MP3/OGG)
```

---

## ğŸ“ Proje YapÄ±sÄ±

```
english-flow/
â”œâ”€â”€ public/
â”‚   â”œâ”€â”€ audio/
â”‚   â”‚   â”œâ”€â”€ chunks/
â”‚   â”‚   â”œâ”€â”€ vocabulary/
â”‚   â”‚   â””â”€â”€ shadowing/
â”‚   â””â”€â”€ images/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”œâ”€â”€ common/
â”‚   â”‚   â”œâ”€â”€ immersion/
â”‚   â”‚   â”œâ”€â”€ shadowing/
â”‚   â”‚   â”œâ”€â”€ chunks/
â”‚   â”‚   â”œâ”€â”€ tenses/
â”‚   â”‚   â”œâ”€â”€ conversation/
â”‚   â”‚   â””â”€â”€ dashboard/
â”‚   â”œâ”€â”€ hooks/
â”‚   â”‚   â”œâ”€â”€ useSpeechRecognition.ts
â”‚   â”‚   â”œâ”€â”€ useSpeechSynthesis.ts
â”‚   â”‚   â”œâ”€â”€ useAudioPlayer.ts
â”‚   â”‚   â””â”€â”€ useSRS.ts
â”‚   â”œâ”€â”€ stores/
â”‚   â”‚   â”œâ”€â”€ userProgress.ts
â”‚   â”‚   â”œâ”€â”€ vocabulary.ts
â”‚   â”‚   â””â”€â”€ settings.ts
â”‚   â”œâ”€â”€ data/
â”‚   â”‚   â”œâ”€â”€ chunks/
â”‚   â”‚   â”‚   â”œâ”€â”€ technical.json
â”‚   â”‚   â”‚   â”œâ”€â”€ travel.json
â”‚   â”‚   â”‚   â””â”€â”€ social.json
â”‚   â”‚   â”œâ”€â”€ vocabulary/
â”‚   â”‚   â”œâ”€â”€ tenses/
â”‚   â”‚   â””â”€â”€ scenarios/
â”‚   â”œâ”€â”€ utils/
â”‚   â”‚   â”œâ”€â”€ srs.ts
â”‚   â”‚   â”œâ”€â”€ scoring.ts
â”‚   â”‚   â””â”€â”€ audio.ts
â”‚   â”œâ”€â”€ pages/
â”‚   â”œâ”€â”€ styles/
â”‚   â””â”€â”€ types/
â”œâ”€â”€ package.json
â”œâ”€â”€ tailwind.config.js
â”œâ”€â”€ tsconfig.json
â””â”€â”€ vite.config.ts
```

---

## ğŸš€ MVP Ã–zellikleri (Faz 1)

### Hafta 1-2: Temel AltyapÄ±
- [ ] Project setup (Vite + React + TS + Tailwind)
- [ ] Routing ve layout
- [ ] Theme ve design system
- [ ] IndexedDB integration

### Hafta 3-4: Chunk Library
- [ ] Chunk data structure
- [ ] Category navigation
- [ ] Audio playback (British TTS)
- [ ] SRS engine

### Hafta 5-6: Shadowing Studio
- [ ] Audio player component
- [ ] Recording functionality
- [ ] Waveform visualization
- [ ] Basic comparison

### Hafta 7-8: Conversation Simulator
- [ ] Scenario selection
- [ ] Speech recognition integration
- [ ] Response evaluation
- [ ] Feedback system

### Hafta 9-10: Dashboard & Polish
- [ ] Progress tracking
- [ ] Statistics visualization
- [ ] Settings & preferences
- [ ] PWA setup (offline)

---

## ğŸ“ Ã–rnek Ä°Ã§erik YapÄ±sÄ±

### Technical Chunk Example
```json
{
  "id": "tech_001",
  "category": "technical",
  "subcategory": "quotations",
  "chunk": "I'd like to walk you through the specifications",
  "ipa": "/aÉªd laÉªk tÉ™ wÉ”Ëk juË Î¸ruË Ã°É™ ËŒspesÉªfÉªËˆkeÉªÊƒÉ™nz/",
  "audioUrl": "/audio/chunks/tech_001.mp3",
  "context": "Presenting technical details to a client",
  "example": "I'd like to walk you through the specifications of our 14.7 cubic metre concrete mixer.",
  "turkishEquivalent": "Sizinle teknik Ã¶zellikleri incelemek isterim",
  "variations": [
    "Let me walk you through...",
    "Allow me to explain..."
  ],
  "difficulty": "B1",
  "tags": ["presentation", "formal", "client-facing"]
}
```

### Scenario Example
```json
{
  "id": "scenario_airport_001",
  "title": "Check-in at Heathrow",
  "setting": "Airport check-in counter",
  "difficulty": "B1",
  "objectives": [
    "Request window seat",
    "Ask about baggage allowance",
    "Confirm gate information"
  ],
  "dialogue": [
    {
      "role": "agent",
      "text": "Good morning, sir. May I see your passport and booking reference, please?",
      "audioUrl": "/audio/scenarios/airport_001_01.mp3"
    },
    {
      "role": "user",
      "expectedResponses": [
        "Here you are. I'm on the flight to Istanbul.",
        "Of course. Here's my passport."
      ],
      "hints": ["Hand over documents politely"]
    }
  ]
}
```

---

## ğŸ¯ BaÅŸarÄ± Metrikleri

| Metrik | Hedef | Ã–lÃ§Ã¼m |
|--------|-------|-------|
| Daily Active Use | 15+ dakika | App analytics |
| Chunk Retention | %80 (30 gÃ¼n sonra) | SRS data |
| Speaking Confidence | +2 level (self-report) | Weekly survey |
| Vocabulary Growth | +50 kelime/ay | System tracking |
| Streak Maintenance | 21+ gÃ¼n | App data |

---

## ğŸ’¡ Ek Ã–neriler

### GÃ¼nlÃ¼k Rutin Ã–nerisi
```
Sabah (10 dk):
â”œâ”€â”€ Word of the day review
â””â”€â”€ 1 chunk shadowing

Ã–ÄŸle (15 dk):
â”œâ”€â”€ Podcast listening (BBC 6 Minute English)
â””â”€â”€ Comprehension check

AkÅŸam (20 dk):
â”œâ”€â”€ SRS review session
â”œâ”€â”€ 1 conversation simulation
â””â”€â”€ Progress check
```

### Tavsiye Edilen Kaynaklar (British English)
- **Podcast:** BBC Learning English, The English We Speak
- **YouTube:** BBC Learning English, English with Lucy
- **App DesteÄŸi:** Youglish (British filter), Forvo (pronunciation)

---

*Bu dÃ¶kÃ¼man, EnglishFlow uygulamasÄ±nÄ±n temelini oluÅŸturur ve Claude Code ile geliÅŸtirme sÃ¼recinde referans olarak kullanÄ±lacaktÄ±r.*

---

## ğŸ¤– AI Director Mode (11 Ocak 2026)

### Genel BakÄ±ÅŸ
AI Director Mode, Conversation Simulator'daki statik diyalog akÄ±ÅŸÄ±nÄ± dinamik ve gerÃ§ekÃ§i bir deneyime dÃ¶nÃ¼ÅŸtÃ¼ren geliÅŸmiÅŸ bir Ã¶zelliktir. Gemini AI kullanarak kullanÄ±cÄ± cevaplarÄ±nÄ± analiz eder ve konuÅŸma akÄ±ÅŸÄ±nÄ± yÃ¶netir.

### Temel Ã–zellikler

#### 1. AkÄ±ÅŸ Kontrol Sistemi (Action Types)
| Action | AÃ§Ä±klama | KullanÄ±m Durumu |
|--------|----------|-----------------|
| `NEXT_TURN` | KullanÄ±cÄ± soruyu cevapladÄ±, bir sonraki tura geÃ§ | GeÃ§erli cevap verildiÄŸinde |
| `STAY` | AynÄ± soruda kal, AI dinamik cevap Ã¼retir | AlakasÄ±z cevap, yardÄ±m talebi, aÃ§Ä±klama isteme |
| `TERMINATE` | KonuÅŸmayÄ± sonlandÄ±r | KullanÄ±cÄ± Ã§Ä±kmak istiyor, sabÄ±r tÃ¼kendi, belge eksik |

#### 2. SabÄ±r KotasÄ± (Patience Quota)
- KullanÄ±cÄ±nÄ±n **7 STAY** hakkÄ± vardÄ±r
- Her off-topic cevap kotadan dÃ¼ÅŸer
- 7. denemede `TERMINATE` tetiklenir
- GeÃ§erli cevap (NEXT_TURN) kotayÄ± sÄ±fÄ±rlar

#### 3. Dinamik Mesaj Biriktirme (stayExchanges)
```typescript
interface StayExchange {
  userText: string      // KullanÄ±cÄ±nÄ±n off-topic mesajÄ±
  userScore: number     // EÅŸleÅŸme puanÄ±
  aiResponse: string    // AI'Ä±n yÃ¶nlendirme cevabÄ±
}
```
- Her STAY action'Ä±nda kullanÄ±cÄ± mesajÄ± + AI cevabÄ± array'e eklenir
- SÄ±ralÄ± gÃ¶rÃ¼ntÃ¼leme saÄŸlar
- NEXT_TURN ile temizlenir

#### 4. Text-to-Speech Entegrasyonu
- AI cevaplarÄ± otomatik olarak seslendirilir
- `speak(text)` fonksiyonu ile British accent TTS

---

### AI Empati ve GerÃ§ekÃ§ilik Kategorileri

AI artÄ±k kullanÄ±cÄ± cevaplarÄ±nÄ± 8 kategoride deÄŸerlendiriyor:

#### A) GeÃ§erli Cevap â†’ `NEXT_TURN`
KullanÄ±cÄ± soruyu cevapladÄ± (kÄ±smen bile olsa), senaryo ilerler.

#### B) Acil Durum / FenalÄ±k â†’ `STAY` + GerÃ§ek Ä°lgi
**Tetikleyiciler:** sick, unwell, faint, dizzy, water urgently, help me
```
KullanÄ±cÄ±: "I'm not feeling well, I need water"
AI: "I understand. Let me get you some water right away. Once you feel a bit better, 
     could you please tell me the purpose of your visit?"
```

#### C) GÃ¶nÃ¼llÃ¼ Geri DÃ¶nÃ¼ÅŸ Ä°steÄŸi â†’ `TERMINATE` NazikÃ§e
**Tetikleyiciler:** go back, return to my country, cancel, don't want to enter
```
KullanÄ±cÄ±: "I want to go back to my country"
AI: "I understand. I'll arrange for an officer to assist you with the return process. 
     Please follow my colleague. Safe travels."
```

#### D) Dil Bariyeri â†’ `STAY` + SabÄ±r
**Tetikleyiciler:** I don't speak English, can't understand, don't know the language
```
KullanÄ±cÄ±: "I don't speak English very well"
AI: "No problem. Would you like me to call an interpreter? For now, can you simply 
     tell me: business or holiday?"
```

#### E) Belge SorunlarÄ± â†’ `TERMINATE` YardÄ±mcÄ±
**Tetikleyiciler:** can't find passport, left bag on plane, forgot documents
```
KullanÄ±cÄ±: "I left my bag on the plane, my passport was inside"
AI: "I understand. Without your passport, I cannot process your entry. Let me call 
     ground services to help locate your bag on the aircraft. Please wait here."
```

#### F) OlaÄŸandÄ±ÅŸÄ± Durumlar â†’ `STAY` + Bilgi Toplama
**Tetikleyiciler:** flight diverted, transit, going to Belgium, unplanned arrival
```
KullanÄ±cÄ±: "My flight was diverted, I was going to Belgium"
AI: "I see, so your flight was diverted here due to weather. Were you planning to 
     continue to Belgium, or will you be staying in the UK?"
```

#### G) Vize EndiÅŸeleri â†’ `STAY` + DeÄŸerlendirme
**Tetikleyiciler:** visa expires, visa issue, visa problem
```
KullanÄ±cÄ±: "My visa expires in 2 days"
AI: "I see your visa expires in 2 days. For a short visit, that should be fine. 
     What is the purpose of your visit?"
```

#### H) GerÃ§ek AlakasÄ±zlÄ±k â†’ `STAY` + YÃ¶nlendirme
**Tetikleyiciler:** Hava durumu, spor, kiÅŸisel sorular
```
KullanÄ±cÄ±: "What's the weather like in London?"
AI: "It's quite cold today. Now, could you please tell me the purpose of your visit?"
```

---

### Teknik Implementasyon

#### Dosya DeÄŸiÅŸiklikleri

**`src/services/aiService.ts`**
- Gemini API entegrasyonu (REST API)
- Model fallback sistemi: `gemini-2.5-flash` â†’ `gemini-2.0-flash-exp` â†’ `gemini-1.5-flash`
- BaÅŸarÄ±lÄ± model caching (`localStorage`)
- KapsamlÄ± prompt engineering

**`src/pages/ConversationSimulator.tsx`**
- `stayExchanges` state: Off-topic mesajlarÄ± biriktirme
- `offTopicCount` state: SabÄ±r kotasÄ± takibi
- `closeFeedbackAndContinue` gÃ¼ncellendi:
  - AI cevabÄ± Ã¶nceki turn (agent) kontrol edilerek Ã¼retiliyor
  - STAY durumunda `userResponses`'dan silme (duplikasyon Ã¶nleme)
  - TTS entegrasyonu (`speak(text)`)
- Render gÃ¼ncellendi:
  - Ana diyalog dÃ¶ngÃ¼sÃ¼ + stayExchanges array'i
  - STAY mesajlarÄ± iÃ§in gÃ¶rsel ayrÄ±m (border-l-4)

#### State YÃ¶netimi
```typescript
// STAY exchange biriktirme
const [stayExchanges, setStayExchanges] = useState<StayExchange[]>([])

// SabÄ±r kotasÄ±
const [offTopicCount, setOffTopicCount] = useState(0)

// AI cevaplarÄ± (NEXT_TURN iÃ§in)
const [aiResponses, setAiResponses] = useState<Map<number, string>>(new Map())
```

#### API Ã‡aÄŸrÄ± AkÄ±ÅŸÄ±
```
1. KullanÄ±cÄ± cevap verir â†’ submitResponse()
2. Feedback popup aÃ§Ä±lÄ±r â†’ showFeedback = true
3. KullanÄ±cÄ± "Devam Et" tÄ±klar â†’ closeFeedbackAndContinue()
4. AI cevap Ã¼retir â†’ generateDynamicResponse()
5. Action'a gÃ¶re iÅŸlem:
   - NEXT_TURN: aiResponses gÃ¼ncelle, turn++ 
   - STAY: stayExchanges'e ekle, userResponses'dan sil, speak()
   - TERMINATE: terminationConfig'e gÃ¶re yÃ¶nlendir
```

---

### Hata AyÄ±klama ve Debug LoglarÄ±

Konsol loglarÄ± ile akÄ±ÅŸ takibi:
```
ğŸ”‘ AI Service initialized
ğŸ”‘ API Key present: true
ğŸ¬ closeFeedbackAndContinue called
ğŸ¬ currentTurnIndex: 1
ğŸ¬ transcript: "can I have some water"
ğŸ¤– Checking AI generation condition
ğŸ¤– answeredTurn (previous): turn_1 agent
ğŸ¤– ENTERING AI generation block!
ğŸ“¡ Attempting REST API call to: gemini-2.5-flash
âœ… Success with gemini-2.5-flash
ğŸ¤– AI Response received: {text: "...", action: "STAY", reason: "..."}
ğŸ”Š Speaking dynamic AI response: "I'm sorry..."
```

---

### Gelecek Ä°yileÅŸtirmeler

- [ ] Conversation history'yi AI'a gÃ¶nderme (baÄŸlam zenginleÅŸtirme)
- [ ] Sentiment analysis ile duygu durumu algÄ±lama
- [ ] Multi-language support (tercÃ¼man Ã§aÄŸÄ±rma simÃ¼lasyonu)
- [ ] Voice tone analysis (kullanÄ±cÄ± ses tonundan stres algÄ±lama)
- [ ] Scenario branching (kullanÄ±cÄ± tercihlerine gÃ¶re dallanma)

---

### Senaryo KapsamÄ±

| Metrik | DeÄŸer |
|--------|-------|
| Toplam Senaryo | **51** |
| terminationConfig | **51** (100%) |
| turn_abort | **51** (100%) |
| AI Director Mode | **TÃ¼m senaryolarda aktif** |

**Her senaryoya eklenen yapÄ±landÄ±rma:**
```typescript
terminationConfig: {
  keywords: ['go back', 'return to', 'scared', 'afraid', 'cancel', 
             'don\'t want to', 'withdraw', 'change my mind', 
             'help me', 'I can\'t find my passport', 'lost passport'],
  targetTurnId: 'turn_abort'
}
```

**Her senaryoya eklenen sonlandÄ±rma turn'i:**
```typescript
{
  id: 'turn_abort',
  role: 'agent',
  text: 'I understand. The conversation has ended. An assistant will help you with your concerns.',
  hints: ['Follow instructions'],
  expectedResponses: [
    { text: 'Thank you.', score: 100 },
    { text: 'Okay, I understand.', score: 100 }
  ]
}
```

---

### Versiyon GeÃ§miÅŸi

| Tarih | DeÄŸiÅŸiklik |
|-------|------------|
| 11 Ocak 2026 | AI Director Mode ilk implementasyon |
| 11 Ocak 2026 | Turn index bug dÃ¼zeltmesi (previous turn kontrolÃ¼) |
| 11 Ocak 2026 | Dinamik mesaj sistemi (stayExchanges array) |
| 11 Ocak 2026 | Mesaj duplikasyonu dÃ¼zeltmesi |
| 11 Ocak 2026 | TTS entegrasyonu (STAY cevaplarÄ±) |
| 11 Ocak 2026 | Empati ve gerÃ§ekÃ§ilik kategorileri (8 kategori) |
| 11 Ocak 2026 | Edge case'ler (dil bariyeri, belge sorunlarÄ±, vize, vb.) |
| 11 Ocak 2026 | `isTerminatedEarly` flag - erken sonlandÄ±rma desteÄŸi |
| 11 Ocak 2026 | Erken sonlandÄ±rmada mikrofon yerine tamamlama butonu |
| 11 Ocak 2026 | Atlanan turn'lerin render edilmemesi dÃ¼zeltmesi |
| 11 Ocak 2026 | BaÅŸlÄ±k gÃ¼ncelleme: "AI Destekli KonuÅŸma PratiÄŸi" |
| 11 Ocak 2026 | **51 senaryoya terminationConfig ve turn_abort eklendi** |
| 14 Ocak 2026 | SPA Routing dÃ¼zeltmesi (`vercel.json` rewrites) |
| 14 Ocak 2026 | iOS PWA Touch OptimizasyonlarÄ± |
| 14 Ocak 2026 | **Code-Splitting ile %85 bundle kÃ¼Ã§Ã¼ltme** |
| 24 Ocak 2026 | iOS Premium Voice kÄ±lavuzu eklendi (Settings sayfasÄ±) |

---

## ğŸ”§ Performans OptimizasyonlarÄ± (14 Ocak 2026)

### SPA Routing DÃ¼zeltmesi

**Problem:** Sayfa yenilendiÄŸinde 404 hatasÄ± (Ã¶rn: `/settings` â†’ 404)

**Ã‡Ã¶zÃ¼m:** `vercel.json` ile tÃ¼m istekleri `index.html`'e yÃ¶nlendirme:
```json
{
  "rewrites": [
    {
      "source": "/(.*)",
      "destination": "/index.html"
    }
  ]
}
```

### iOS PWA Touch OptimizasyonlarÄ±

**Problem:** iPhone Safari/PWA'da menÃ¼ geÃ§iÅŸlerinde 5-6 saniye gecikme

**Ã‡Ã¶zÃ¼mler:**

| Optimizasyon | AÃ§Ä±klama |
|--------------|----------|
| `touch-action: manipulation` | 300ms iOS tap delay kaldÄ±rÄ±ldÄ± |
| `-webkit-tap-highlight-color: transparent` | Dokunma highlight'Ä± kaldÄ±rÄ±ldÄ± |
| `user-scalable=no` | YanlÄ±ÅŸlÄ±kla zoom engellendi |
| `apple-mobile-web-app-capable` | PWA standalone mode |
| `transform: translateZ(0)` | GPU hÄ±zlandÄ±rma |
| `transition-duration: 150ms` | Mobilde daha hÄ±zlÄ± geÃ§iÅŸler |
| `overscroll-behavior: none` | iOS rubber-band scroll engeli |
| `min-height/width: 44px` | Apple HIG uyumlu dokunma hedefleri |

**Eklenen Meta Taglar:**
```html
<meta name="apple-mobile-web-app-capable" content="yes" />
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
<meta name="apple-mobile-web-app-title" content="EnglishFlow" />
<meta name="format-detection" content="telephone=no" />
```

### Code-Splitting (React.lazy)

**Problem:** 1.3MB tek bundle â†’ yavaÅŸ yÃ¼kleme ve navigasyon

**Ã‡Ã¶zÃ¼m:** `React.lazy()` ile sayfa bazlÄ± code-splitting

| Metrik | Ã–nce | Åimdi |
|--------|------|-------|
| Ana bundle | **1,335 KB** | **199 KB** |
| KÃ¼Ã§Ã¼lme | - | **%85** |

**Sayfa Chunk BoyutlarÄ±:**
```
index.js                    199 KB (ana bundle)
Dashboard.js                 25 KB
Settings.js                  25 KB
TenseTrainer.js              27 KB
ChunkLibrary.js              95 KB
ShadowingStudio.js          126 KB
ConversationSimulator.js    262 KB
VocabularyLibrary.js        459 KB
```

**NasÄ±l Ã§alÄ±ÅŸÄ±yor:**
1.  `/` aÃ§Ä±ldÄ±ÄŸÄ±nda: Sadece `index.js` + `Dashboard.js` yÃ¼klenir
2.  BaÅŸka sayfaya gidince: O sayfa chunk'Ä± o an yÃ¼klenir
3.  Loading spinner gÃ¶sterilir â†’ anÄ±nda sayfa render

**Uygulama:**
```tsx
import { Suspense, lazy } from 'react'

const Dashboard = lazy(() => import('./pages/Dashboard'))
const Settings = lazy(() => import('./pages/Settings'))
// ... diÄŸer sayfalar

function App() {
  return (
    <Suspense fallback={<PageLoader />}>
      <Routes>
        <Route path="/" element={<Dashboard />} />
        <Route path="/settings" element={<Settings />} />
        {/* ... */}
      </Routes>
    </Suspense>
  )
}
```

---

## ğŸŒ Cloud TTS & Ses Motoru GÃ¼ncellemesi (25 Ocak 2026)

### Genel BakÄ±ÅŸ
Uygulamaya yÃ¼ksek kaliteli, doÄŸal ve insansÄ± sesler eklemek iÃ§in Google Cloud TTS ve ElevenLabs entegrasyonu yapÄ±lmÄ±ÅŸtÄ±r. "Unified TTS" mimarisi sayesinde uygulama, seÃ§ilen saÄŸlayÄ±cÄ±ya (Google/ElevenLabs/Local) gÃ¶re otomatik olarak en iyi ses deneyimini sunar.

### Yeni Ã–zellikler

#### 1. Ã‡oklu Ses SaÄŸlayÄ±cÄ± (Multi-Provider) DesteÄŸi
- **Google Cloud TTS:** Saf, net ve yÃ¼ksek kaliteli Neural2 sesleri (Safari uyumlu).
- **ElevenLabs Premium:** Ultra gerÃ§ekÃ§i, nefes alan ve tonlama yapan yapay zeka sesleri.
- **Local (Device):** Ã‡evrimdÄ±ÅŸÄ± kullanÄ±m iÃ§in cihazÄ±n kendi ses motoru.

#### 2. Unified TTS Mimarisi (`useUnifiedTTS` Hook)
- Tek bir hook Ã¼zerinden tÃ¼m ses motorlarÄ±nÄ± yÃ¶netir.
- `speak(text)` Ã§aÄŸrÄ±ldÄ±ÄŸÄ±nda, ayarlarda seÃ§ili olan saÄŸlayÄ±cÄ±ya (Google/ElevenLabs) otomatik yÃ¶nlendirme yapar.
- Cloud servislerinde hata olmasÄ± durumunda kullanÄ±cÄ±ya gÃ¶rsel geri bildirim verir.
- **Echo Prevention:** AynÄ± metnin Ã¼st Ã¼ste binerek (yankÄ±) Ã§almasÄ±nÄ± engelleyen akÄ±llÄ± kontrol mekanizmasÄ± (`useRef` logic).

#### 3. Conversation Simulator Entegrasyonu
- SimÃ¼lasyon artÄ±k seÃ§ilen Cloud ses motorunu kullanÄ±yor.
- Karakterler (Agent) Ã§ok daha doÄŸal ve akÄ±cÄ± konuÅŸuyor.
- Dudak/Dalga animasyonlarÄ± Cloud TTS ile senkronize edildi (`isSpeaking` state yÃ¶netimi).
- Hata durumunda (Quota, API hatasÄ±) kullanÄ±cÄ± uyarÄ± sistemi.

### Teknik Detaylar
- **Vercel Edge Functions:** API anahtarlarÄ±nÄ± (Google & ElevenLabs) gizlemek iÃ§in sunucu taraflÄ± proxy endpointleri (`/api/google-tts`, `/api/tts`).
- **Settings UI:** BasitleÅŸtirilmiÅŸ ses motoru seÃ§imi. Gereksiz dropdownlar kaldÄ±rÄ±ldÄ±.
- **GÃ¼venlik:** API anahtarlarÄ± client-side kodunda deÄŸil, Vercel Environment Variables iÃ§inde saklanÄ±r.

### Versiyon GeÃ§miÅŸi Eklemesi
| Tarih | DeÄŸiÅŸiklik |
|-------|------------|
| 25 Ocak 2026 | Google Cloud TTS Entegrasyonu (Neural2) |
| 25 Ocak 2026 | ElevenLabs API Entegrasyonu (Proxy) |
| 25 Ocak 2026 | Unified TTS Mimarisi ve Provider Selection UI |
| 25 Ocak 2026 | Conversation Simulator Cloud Ses DesteÄŸi |
| 25 Ocak 2026 | Ses yankÄ± (echo) ve animasyon senkronizasyon dÃ¼zeltmeleri |

## âš¡ï¸ GeniÅŸ KapsamlÄ± Performans OptimizasyonlarÄ± (25 Ocak 2026)

### Versiyon 1.1.0 GÃ¼ncellemesi

**Problem:** Chunks Library (+500 Ã¶ÄŸe) ve Conversation Simulator gibi listelerde kaydÄ±rma performansÄ± dÃ¼ÅŸÃ¼ktÃ¼ ve mobil cihazlarda ciddi takÄ±lmalar (layout thrashing) yaÅŸanÄ±yordu.

### Ã‡Ã¶zÃ¼mler

#### 1. Infinite Scroll (Sonsuz KaydÄ±rma)
- **Eski:** TÃ¼m liste tek seferde render ediliyordu (DOM Size > 3000 node).
- **Yeni:** `useIntersectionObserver` hook ile geliÅŸtirilen sonsuz kaydÄ±rma.
- **Mekanizma:**
  - AÃ§Ä±lÄ±ÅŸta sadece **10 Ã¶ÄŸe** yÃ¼klenir.
  - KullanÄ±cÄ± listenin sonuna yaklaÅŸtÄ±ÄŸÄ±nda (gÃ¶rÃ¼nmez bir "trigger" elemanÄ±) otomatik olarak bir sonraki 10 Ã¶ÄŸeyi yÃ¼kler.
  - "Show More" butonu kaldÄ±rÄ±ldÄ±, deneyim tamamen akÄ±ÅŸkan hale getirildi.

#### 2. Layout Thrashing (Animasyon Kilitlenmesi) Giderildi
- **Problem:** `Framer Motion` kÃ¼tÃ¼phanesinin `layout` prop'u, liste elemanlarÄ± her deÄŸiÅŸtiÄŸinde tÃ¼m listenin koordinatlarÄ±nÄ± yeniden hesaplÄ±yordu (Reflow/Repaint). Mobil CPU'yu %100'e kilitliyordu.
- **Ã‡Ã¶zÃ¼m:** `layout` prop'u kaldÄ±rÄ±ldÄ±. `AnimatePresence` optimize edildi.
- **SonuÃ§:** Liste kaydÄ±rma performansÄ± 60 FPS'e sabitlendi. Titreme (flickering) sorunlarÄ± Ã§Ã¶zÃ¼ldÃ¼.

#### 3. Shadowing Studio GeÃ§iÅŸ Optimizasyonu
- **Problem:** Chunks -> Shadowing sekmesine geÃ§erken 2-3 saniyelik donma.
- **Analiz:** `ShadowingStudio` bileÅŸeni her mount olduÄŸunda tÃ¼m iÃ§erik verisini (`shadowingContent`) gereksiz yere filtreliyordu.
- **Ã‡Ã¶zÃ¼m:** Filtreleme mantÄ±ÄŸÄ± `useMemo` ile Ã¶nbelleÄŸe alÄ±ndÄ±. GeÃ§iÅŸler artÄ±k anlÄ±k (instant).

#### 4. Lazy Init (Gecikmeli BaÅŸlatma)
- **Problem:** Uygulama aÃ§Ä±lÄ±ÅŸÄ±nda Speech Recognition ve TTS modÃ¼lleri hemen baÅŸlatÄ±lÄ±yordu.
- **Ã‡Ã¶zÃ¼m:** Bu aÄŸÄ±r modÃ¼ller artÄ±k sadece kullanÄ±cÄ± ilgili sayfaya (KonuÅŸma/Chat) girdiÄŸinde baÅŸlatÄ±lÄ±yor.

### Versiyon GeÃ§miÅŸi Eklemesi
| Tarih | Versiyon | DeÄŸiÅŸiklik |
|-------|----------|------------|
| 25 Ocak 2026 | **v1.1.0** | **Infinite Scroll** (Chunks & Chat scenarios) |
| 25 Ocak 2026 | v1.1.0 | Layout Thrashing Fix (Animation optimization) |
| 25 Ocak 2026 | v1.1.0 | Shadowing Studio Transition Fix (Memoization) |
| 25 Ocak 2026 | v1.1.0 | Lazy Initialization of Heavy Modules |
